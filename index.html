<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VR 리밸런싱 계산기</title>
    <link rel="manifest" href="manifest.json">
    <style>
        body { font-family: sans-serif; padding: 20px; background: #f4f7f6; }
        .card { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h2 { color: #2c3e50; margin-top: 0; }
        .input-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }
        button { width: 100%; padding: 12px; background: #3498db; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; }
        #result { margin-top: 20px; padding: 15px; border-radius: 6px; display: none; }
        .buy { background: #ffebee; color: #c62828; }
        .sell { background: #e8f5e9; color: #2e7d32; }
    </style>
</head>
<body>
    <div class="card">
        <h2>VR 계산기</h2>
        <div class="input-group">
            <label>현재 주가 ($)</label>
            <input type="number" id="currentPrice" step="0.01" placeholder="예: 65.20">
        </div>
        <div class="input-group">
            <label>보유 수량</label>
            <input type="number" id="holdings" placeholder="예: 100">
        </div>
        <div class="input-group">
            <label>현재 목표 밸류 ($)</label>
            <input type="number" id="targetValue" placeholder="예: 10000">
        </div>
        <button onclick="calculateVR()">적정가 계산하기</button>

        <div id="result"></div>
    </div>

    <script>
        function calculateVR() {
            const price = parseFloat(document.getElementById('currentPrice').value);
            const stocks = parseFloat(document.getElementById('holdings').value);
            const target = parseFloat(document.getElementById('targetValue').value);
            
            if(!price || !stocks || !target) return alert("모든 값을 입력해주세요.");

            const currentEval = price * stocks;
            const diff = target - currentEval;
            const resultDiv = document.getElementById('result');
            resultDiv.style.display = "block";

            // 간단 가이드 로직 (라오어 VR 기본 원리 적용)
            if (diff > 0) {
                resultDiv.className = "buy";
                resultDiv.innerHTML = `<strong>매수 구간:</strong> 부족분 $${diff.toFixed(2)}만큼 LOC 매수 예약을 권장합니다.`;
            } else {
                resultDiv.className = "sell";
                resultDiv.innerHTML = `<strong>매도 구간:</strong> 초과분 $${Math.abs(diff).toFixed(2)}만큼 LOC 매도 예약을 권장합니다.`;
            }
        }

        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js');
        }
    </script>
</body>
</html>
